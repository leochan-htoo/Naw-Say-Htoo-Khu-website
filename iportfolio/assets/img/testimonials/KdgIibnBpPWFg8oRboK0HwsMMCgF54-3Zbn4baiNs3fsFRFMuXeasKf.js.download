if (self.CavalryLogger) { CavalryLogger.start_js(["ho9iq0Z"]); }

__d("MWUIThreadEmoji.bs",["cr:610"],(function(a,b,c,d,e,f){"use strict";a=b("cr:610").useEmoji;f.$MWLSThreadEmoji$OR$WorkplaceMSThreadEmoji$requireCond=b("cr:610");f.useEmoji=a}),null);
__d("MWChatTabContentNew.bs",["MWChatComposerMediaDropTarget.bs","MWChatComposerMessageRequestInfoText.bs","MWChatTabContent.bs","MWChatThread.bs","MWChatUserComposer.bs","MWLSThreadIsMessageRequest.bs","MWTheme.bs","MWUIThreadEmoji.bs","MWV2ReplyContext.bs","bs_caml_option","bs_curry","cr:814","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("cr:814").make;c=b("cr:814").$MAWCreateOneToOneThread$requireCond;d=b("cr:814").$MWChatAudioRecorderStreamSetup$Deferred;e=b("cr:814").MWChatComposer;c={$MAWCreateOneToOneThread$requireCond:c,$MWChatAudioRecorderStreamSetup$Deferred:d,MWChatComposer:e,make:j};function k(a){var c=a.id,d=a.dispatch,e=a.closeTab,f=a.otherUserFbid,g=a.customLikeEmoji,k=a.isTabFocused,l=a.hasContent,m=a.repliedToMessage,n=a.closeReplyPreview,o=a.onSendMessage,p=a.isOptimisticThread;a=a.isLoading;var q=p!==void 0?p:!1;p=a!==void 0?a:!1;var r=b("MWTheme.bs").useTheme(void 0);a=i.useRef(0);var s=i.useState(function(){return!1}),t=s[1],u=s[0];s=i.useRef(null);var v=i.useRef(null),w=i.useRef(null),x=b("MWLSThreadIsMessageRequest.bs").useHook(void 0),y;y=r.TAG===0?void 0:{backgroundImage:b("MWTheme.bs").gradient(void 0,void 0,r._0.colors)};return i.jsx(i.Fragment,{children:i.jsx("div",{className:(h||(h=b("stylex")))(b("MWChatTabContent.bs").styles.main),children:i.jsxs(b("MWChatComposerMediaDropTarget.bs").make,{children:[i.jsx("div",{className:h(b("MWChatTabContent.bs").styles.thread),style:y,children:i.jsx(b("MWChatThread.bs").make,{id:c,scrollPositionRef:a,dispatch:d,spacerRef:v,scrollerRef:s,forceContextBanner:!p})}),i.jsx("div",{className:h(b("MWChatTabContent.bs").styles.composer),children:i.jsx(b("MWChatUserComposer.bs").make,{threadId:c,chatComposer:function(a){return i.jsx(j,{color:b("MWTheme.bs").bottom(r),otherUserFbid:f,isPreviewThread:!0,isOptimisticThread:q,customLikeEmoji:g,isTabFocused:k,shouldShowMenu:!1,hasContent:l,repliedToMessage:m,actionTrayOpen:u,closeActionTray:function(a){return b("bs_curry")._1(t,function(a){return!1})},openActionTray:function(a){return b("bs_curry")._1(t,function(a){return!0})},fileUploadHandlerRef:w,messageRequestInfoText:i.jsx(b("MWChatComposerMessageRequestInfoText.bs").make,{closeTab:function(a){},size:"large",shouldShowMessageRequestInfoText:x}),closeReplyPreview:n,openTabFromPreview:function(a){return d("OpenTabFromPreview")},closeTab:e,onSendMessage:o})}})})],disabled:!1,fileUploadHandlerRef:w,xstyle:b("MWChatTabContent.bs").styles.dropTarget})})})}d={make:k};function a(a){var c=a.id,d=a.isTabFocused,e=a.dispatch,f=a.closeTab,g=a.messages,h=a.hasContent,j=a.changeRepliedToMessage,l=a.repliedToMessage,m=a.closeReplyPreview,n=a.onSendMessage,o=a.isOptimisticThread;a=a.isLoading;o=o!==void 0?o:!1;a=a!==void 0?a:!1;if(typeof c==="object"){var p=c.NAME;p=p==="User"||p==="Page"?b("bs_caml_option").some(c.VAL):void 0}else p=void 0;var q=b("bs_curry")._1(b("MWUIThreadEmoji.bs").useEmoji,void 0),r=function(a){if(typeof a==="object"&&a.NAME==="ClickReplyTo")return b("bs_curry")._1(j,a.VAL);else return e(a)};return i.jsx(b("MWV2ReplyContext.bs").make,{children:i.jsx(k,{id:c,items:g,dispatch:r,closeTab:f,otherUserFbid:p,customLikeEmoji:q,isTabFocused:d,hasContent:h,repliedToMessage:l,closeReplyPreview:m,onSendMessage:n,isOptimisticThread:o,isLoading:a})})}e=b("MWChatTabContent.bs").styles;a=a;f.styles=e;f.$MWChatComposer$OR$WorkChatComposer$requireCond=b("cr:814");f.Composer=c;f.Inner=d;f.make=a}),null);
__d("MWChatTabNew.bs",["CometPlaceholder.react","MWChatComposer.bs","MWChatComposerMediaDropTarget.bs","MWChatConnectionStatusCard.bs","MWChatTabContentNew.bs","MWChatTabContentStyles.bs","MWLSChatThreadHook.bs","MWLSRepliedToMessage.bs","MWLSTheme.bs","MWTheme.bs","MWThreadKey.bs","MWThread_DEPRECATED.bs","MWUIChatTabState.bs","bs_belt_Option","bs_caml_option","bs_curry","react","recoverableViolation","stylex","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");function j(a){var c=a.hasContent,d=a.isTabFocused,e=a.openTabForGroup;a=function(a){if(typeof a==="object"&&a.NAME==="Group")return e(a.VAL,!1);else{b("recoverableViolation")("expected group","messenger_web_product");return}};var f=i.useRef(null);return i.jsx("div",{className:(h||(h=b("stylex")))(b("MWChatTabContentStyles.bs").styles.main),children:i.jsxs(b("MWChatComposerMediaDropTarget.bs").make,{children:[i.jsx("div",{className:h(b("MWChatTabContentStyles.bs").styles.thread)}),i.jsx("div",{className:h(b("MWChatTabContentStyles.bs").styles.composer),children:i.jsx(b("MWChatComposer.bs").make,{color:b("MWTheme.bs").bottom(b("MWTheme.bs").$$default),otherUserFbid:void 0,isPreviewThread:!0,customLikeEmoji:void 0,isTabFocused:d,shouldShowMenu:!1,hasContent:c,repliedToMessage:void 0,actionTrayOpen:!1,closeActionTray:function(a){},openActionTray:function(a){},fileUploadHandlerRef:f,closeReplyPreview:function(a){},openTabFromPreview:function(a){},closeTab:function(a){},onSendMessage:a})})],disabled:!1,fileUploadHandlerRef:f,xstyle:b("MWChatTabContentStyles.bs").styles.dropTarget})})}c={make:j};function k(a){var c=a.threadId;a=a.children;b("MWLSChatThreadHook.bs").useThread(c);return a}d={make:k};function l(a){var c=a.isTabFocused,d=a.hasContent,e=a.openTabForGroup,f=a.openTabForUser,g=a.openTabForPage;a=a.isOptimisticThread;a=a!==void 0?a:!1;var h=b("MWThread_DEPRECATED.bs").useIdExn(void 0),j=b("MWThreadKey.bs").useIdMemoizedExn(void 0),k=b("MWLSRepliedToMessage.bs").useCurrentlyRepliedToMessage(void 0),l=k[2],m=function(a){var c=a.NAME;if(c==="Group")return e(a.VAL,!1);else if(c==="Page")return g(a.VAL,!1);else if(c==="User")return f(a.VAL,!1);else return b("unrecoverableViolation")("Not supported","messenger_web_product")},n=i.useState(function(){}),o=n[1];n=[{NAME:"Messages",VAL:[]}];j=b("MWLSTheme.bs").useTheme(j);return i.jsx(b("CometPlaceholder.react"),{children:i.jsx(b("MWTheme.bs").provider,{theme:j,children:i.jsx(b("MWChatTabContentNew.bs").make,{id:h,isTabFocused:c,dispatch:function(a){if(typeof a==="object")return;else if(a==="OpenTabFromPreview")return m(h);else if(a==="CloseReplyPreview")return b("bs_curry")._1(l,void 0);else return},closeTab:function(a){},messages:n,hasContent:d,changeRepliedToMessage:k[1],repliedToMessage:k[0],closeReplyPreview:function(a){return b("bs_curry")._1(o,function(a){})},onSendMessage:m,isOptimisticThread:a,isLoading:!1})}),fallback:null})}e={make:l};function a(a){var c=a.previewThreadID,d=a.isTabFocused,e=a.isFetching,f=a.hasContent,g=a.tokens,h=a.openTabForUser,m=a.openTabForGroup,n=a.openTabForPage;a=a.empty;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;return i.jsxs(i.Fragment,{children:[i.jsx(b("MWChatConnectionStatusCard.bs").make,{}),e?null:c!==void 0?i.jsx(b("MWThread_DEPRECATED.bs").make,{id:c,children:i.jsx(b("MWThreadKey.bs").make,{id:b("MWThread_DEPRECATED.bs").toThreadKey(c),children:i.jsx(b("MWUIChatTabState.bs").Provider.make,{tab:{_0:c},children:i.jsx(k,{children:i.jsx(l,{isTabFocused:d,hasContent:f,openTabForGroup:m,openTabForUser:h,openTabForPage:n}),threadId:c})})})}):g.length!==0?i.jsx(b("MWUIChatTabState.bs").Provider.make,{tab:0,tokenProvider:function(a){return g.map(function(a){return a.getRawData().id})},children:i.jsx(j,{tokens:g,hasContent:f,isTabFocused:d,openTabForGroup:m})}):a]})}var m=b("bs_belt_Option").getWithDefault,n=b("MWChatTabContentStyles.bs").styles,o=10;a=a;f.$pipe$question=m;f.contentStyles=n;f.ComposerToCreateNewThread=c;f.ExistingThreadPreviewContainer=d;f.maxMessageCountForPreview=o;f.ExistingThreadPreview=e;f.make=a}),null);
__d("MWLSGroupMembershipMemberCell.bs",["fbt","ix","CometLazyPopoverTrigger.react","CometMiddot.react","FBID.bs","JSResource","LSContactBlockedByViewerStatus.bs","LSContactGenderToGenderConst.bs","LSWhatsAppConnectStatus.bs","MDSListCell.react","MDSText.react","MDSTextPairing.react","MWCMThreadTypes.bs","MWInboxRouteBuilder.bs","MWLSContactTypeExactUtils.bs","TetraIcon.react","TetraProfilePhoto.react","bs_caml","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","fbicon","getFBTSafeGenderFromGenderConst","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k=null;function l(a){return j.useMemo(function(){var c=a.filter(function(a){return a!==k}),d=c.length;if(d===0)return;else return b("bs_caml_option").some(c.map(function(a,c){return j.jsxs(j.Fragment,{children:[c!==0?j.jsx(b("CometMiddot.react"),{}):null,a]},String(c))}))},[a])}function a(a){var c=a.onClose,d=a.thread,e=a.participant,f=a.contact,i=a.showAdminIndicator,m=a.isMAWParticipantSuperAdmin;a=a.isSecure;var n=b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildURL,{thread_key:b("FBID.bs").ofStringExn(b("bs_int64").to_string(f.a))}),o=e.f;o=o!==void 0?o:!1;var p=b("bs_caml").i64_neq(f.n,b("LSContactBlockedByViewerStatus.bs").unblocked),q=b("bs_caml").i64_eq(f.P,b("LSWhatsAppConnectStatus.bs").whatsappNotAddressable),r=b("bs_caml_obj").caml_equal(e.l,!0),s=b("LSContactGenderToGenderConst.bs").make(f.I),t=f.K,u;if(a&&q)u=g._(/*FBT_CALL*/"Pending"/*FBT_CALL*/).toString();else{a=e.g;q=0;a!==void 0&&r?u=a:q=1;q===1&&(u=o&&i?g._(/*FBT_CALL*/"Admin"/*FBT_CALL*/):k)}a=e.g;var v=l([t!==void 0&&b("MWLSContactTypeExactUtils.bs").isIgContact(f)?t:k,u,p?g._(/*FBT_CALL*/"Blocked"/*FBT_CALL*/):k,a!==void 0&&!r&&!b("MWCMThreadTypes.bs").isJoinedCMThread(d.c)?a:k]);return j.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("MWLSGroupMembershipMenu.react").__setRef("MWLSGroupMembershipMemberCell.bs"),popoverProps:{onCloseDialog:c,onClose:c,thread:d,participant:e,contact:f,isMAWParticipantSuperAdmin:m},popoverType:"menu",align:"end",preloadTrigger:"button",children:function(a,c,d,i,k,l,m){return j.jsx(b("MDSListCell.react"),{addOnStart:j.jsx(b("TetraProfilePhoto.react"),{shape:"circle",alt:f.h,size:36,source:{uri:f.b},linkProps:{url:n}}),addOnEnd:j.jsx(b("TetraIcon.react"),{"aria-label":g._(/*FBT_CALL*/{"*":"Member settings for {name}"}/*FBT_CALL*/,[g._name("name",f.h,b("getFBTSafeGenderFromGenderConst")(s))]),icon:b("fbicon")._(h("484388"),24),onPress:function(a){return b("bs_curry")._1(c,void 0)},onPressIn:b("bs_curry").__1(l),onHoverIn:b("bs_curry").__1(i),onHoverOut:function(a){return b("bs_curry")._1(k,void 0)},testid:"mw_participant_list_dropdown_menu_button_"+b("bs_int64").to_string(e.b),color:"secondary",ref:a}),addOnEndVerticalAlign:"center",content:v!==void 0?j.jsx(j.Fragment,{children:j.jsx(b("MDSTextPairing.react"),{body:j.jsx(b("MDSText.react"),{color:"secondary",type:"body4",children:b("bs_caml_option").valFromOption(v)}),headline:j.jsx(b("MDSText.react"),{type:"headline4",children:f.h}),level:4})}):j.jsx(b("MDSText.react"),{type:"headline4",numberOfLines:1,children:f.h}),verticalAlign:v===void 0?"center":"top",size:"medium"})}})}c=a;f.empty=k;f.useSubTitle=l;f.make=c}),null);
__d("MWLSGroupMembershipMemberList.bs",["LSMessagingThreadTypeUtil.bs","MAWThreadId.bs","MWLSGroupMembershipMemberCell.bs","Promise","ReStore.bs","bs_curry","bs_int64","cr:12166","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.onClose,d=a.thread,e=a.showAdminsOnly,f=a.showAdminIndicator;a=a.participantsAndContacts;var g=c!==void 0?c:function(a){};c=h.useState(function(){});var i=c[1],j=c[0];c=a.slice(0).sort(function(a,b){return a[1].h.localeCompare(b[1].h)});a=e?c.filter(function(a){a=a[0].f;if(a!==void 0)return a;else return!1}):c;var k=b("LSMessagingThreadTypeUtil.bs").isSecure(d.c),l=b("ReStore.bs").useHook(void 0);h.useEffect(function(){!(b("cr:12166")==null)&&k&&b("promiseDone")(b("MAWThreadId.bs").ofThreadKey(l,d.a).then(function(a){if(a)return b("bs_curry")._1(b("bs_curry")._1(b("cr:12166").getGroupSuperAdmin,{threadId:a._0}).sendAndReceive,void 0).then(function(a){return b("bs_curry")._1(i,function(b){return a})});else return b("Promise").resolve(void 0)}),void 0,void 0)},[l,JSON.stringify(d.a)]);return a.map(function(a){var c=a[1];return h.jsx(b("MWLSGroupMembershipMemberCell.bs").make,{onClose:g,thread:d,participant:a[0],contact:c,showAdminIndicator:f,isMAWParticipantSuperAdmin:k&&j!==void 0?j===b("bs_int64").to_string(c.a):!1,isSecure:k},b("bs_int64").to_string(c.a))})}c=a;f.$MAWBackendBridge$requireCondXplat=b("cr:12166");f.make=c}),null);
__d("MWMDotMeReferrerContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(void 0);function a(a){var b=a.children;a=a.referrer;return h.createElement(i.Provider,{value:a,children:b})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);
__d("LSContactLink.bs",["CometLink.react","CometPressable.react","CurrentEnvironment","FBID.bs","MWLSContactTypeExactUtils.bs","XCometVanityURLControllerRouteBuilder","bs_caml_option","bs_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.K,d=b("MWLSContactTypeExactUtils.bs").isIgContact(a);return c!==void 0&&d?"https://www.instagram.com/"+c:(b("CurrentEnvironment").facebookdotcom?"":"https://www.facebook.com")+b("XCometVanityURLControllerRouteBuilder").buildURL({vanity:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.a))})}var i={expanding:{display:"j83agx80"}};function c(a){var c=a.contact,d=a.children,e=a.isText,f=a.label;a=a.testid;e=e!==void 0?e:!0;var g=f!==void 0?b("bs_caml_option").some(f):void 0,j=c.K,k=b("MWLSContactTypeExactUtils.bs").isIgContact(c);if(j!==void 0&&k){k="https://www.instagram.com/"+j;if(e){j={href:k,target:"_blank",children:d};f!==void 0&&(j.label=f);a!==void 0&&(j.testid=a);return h.jsx(b("CometLink.react"),j)}j={expanding:!0,linkProps:{target:"_blank",url:k},overlayRadius:"50%",xstyle:function(a){return[i.expanding]},children:d};g!==void 0&&(j.label=b("bs_caml_option").valFromOption(g));a!==void 0&&(j.testid=b("bs_caml_option").valFromOption(a));return h.jsx(b("CometPressable.react"),j)}k=(b("CurrentEnvironment").facebookdotcom?"":"https://www.facebook.com")+b("XCometVanityURLControllerRouteBuilder").buildURL({vanity:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.a))});j=b("CurrentEnvironment").facebookdotcom?void 0:"_blank";if(e){c={href:k,children:d};j!==void 0&&(c.target=b("bs_caml_option").valFromOption(j));f!==void 0&&(c.label=f);a!==void 0&&(c.testid=a);return h.jsx(b("CometLink.react"),c)}e={url:k};j!==void 0&&(e.target=b("bs_caml_option").valFromOption(j));f={expanding:!0,linkProps:e,overlayRadius:"50%",xstyle:function(a){return[i.expanding]},children:d};g!==void 0&&(f.label=b("bs_caml_option").valFromOption(g));a!==void 0&&(f.testid=b("bs_caml_option").valFromOption(a));return h.jsx(b("CometPressable.react"),f)}d=c;f.getHref=a;f.styles=i;f.make=d}),null);
__d("LSPresenceStatusText.bs",["fbt","CometRelativeTimestamp.react","MWChatContactPresenceHook.bs","MWLSActor.bs","MessagingThreadType.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_caml","bs_curry","bs_int64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j=g._(/*FBT_CALL*/"Active now"/*FBT_CALL*/);function k(a){var c=a.a;a=b("bs_int64").to_string(c);var d=b("ReStore.bs").useHook(void 0),e=b("MWLSActor.bs").useActor(void 0);return b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"participants").asc,{hd:c,tl:0}),function(a){return b("bs_caml").i64_neq(a.b,e)}),function(a){return a.b})},[d,e,a]))}function l(a){var c=a.contactId;a=a.renderWrapper;var d=b("MWChatContactPresenceHook.bs").useIsActive(c);c=b("MWChatContactPresenceHook.bs").useLastActiveTimestampMs(c);if(d)return b("bs_curry")._1(a,j);else if(c!==void 0)return b("bs_curry")._1(a,g._(/*FBT_CALL*/"Active {time} ago"/*FBT_CALL*/,[g._param("time",i.jsx(b("CometRelativeTimestamp.react"),{date:new Date(c),format:"minimized"}))]));else return null}c={make:l};function m(a){var b=a.thread;a=a.renderWrapper;b=k(b);if(b.length!==1)return null;b=b[0];return i.jsx(l,{contactId:b,renderWrapper:a})}d={PresenceText:c,make:m};function n(a){var c=a.thread;a=a.renderWrapper;c=k(c);c=b("MWChatContactPresenceHook.bs").useHasActiveContact(c);if(c)return b("bs_curry")._1(a,j);else return null}e={make:n};function o(a){return a}function a(a){var c=a.thread;a=a.renderWrapper;a=a!==void 0?a:o;var d=c.c;if(b("bs_caml").i64_eq(d,b("MessagingThreadType.bs").oneToOne))return i.jsx(m,{thread:c,renderWrapper:a});else if(b("bs_caml").i64_eq(d,b("MessagingThreadType.bs").group))return i.jsx(n,{thread:c,renderWrapper:a});else return null}c=a;f.OneOnOnePresence=d;f.GroupPresence=e;f.defaultRenderWrapper=o;f.make=c}),null);
__d("LSVerificationBadge.bs",["CometPageVerificationIcon.react","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","MWLSActor.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","bs_caml","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={badge:{paddingStart:"scb9dxdr"}};function a(a){var c=a.thread;a=a.size;var d=b("ReStore.bs").useHook(void 0),e=b("MWLSActor.bs").useActor(void 0),f=b("ReQLSubscription.bs").useArray(i.useMemo(function(){var a;return(a=b("ReQL.bs")).take(a.map(a.filter(a.getKeyRange(b("ReQLTable").table(d,"participants").asc,{hd:c.a,tl:0}),function(a){return b("bs_caml").i64_neq(a.b,e)}),function(a){var c=b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:a.b,tl:0}));return[a,c]}),2)},[d,JSON.stringify(c.a),e]));if(f.length!==1)return null;f=f[0];f=f[1];if(f!==void 0&&b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").verified,f)===!0)return i.jsx("span",{className:(h||(h=b("stylex")))(j.badge),children:i.jsx(b("CometPageVerificationIcon.react"),{size:a,verificationBadge:"BLUE_VERIFIED"})});else return null}c=a;f.styles=j;f.make=c}),null);
__d("MWInboxHeaderDetails.bs",["CometMiddot.react","CometPlaceholder.react","LSContactLink.bs","LSPresenceStatusText.bs","LSRtcCallState.bs","LSThreadTitle.bs","LSVerificationBadge.bs","MDSText.react","MWCMInboxHeaderCommunityGroupName.bs","MWCMThreadTypes.bs","MWChatCalculateIsMutedFromExpireTime.bs","MWChatHeaderDetailsSubtitle.bs","MWLSContactTypeExactUtils.bs","MessagingThreadType.bs","MessengerMuteUtils.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_caml","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={container:{display:"j83agx80",flexDirection:"cbu4d94t",alignItems:"ll8tlv6m",justifyContent:"bkfpd7mw",flexGrow:"buofh1pr",minHeight:"qx9c56kf"},title:{marginTop:"aahdfvyu",marginBottom:"bi6gxh9e"},item:{maxWidth:"d2edcug0",display:"j83agx80",alignItems:"bp9cbjyn"}};function a(a){var c=a.thread,d=a.threadNameSize,e=a.color;a=a.isTitleALink;a=a!==void 0?a:!0;var f=b("ReStore.bs").useHook(void 0),g=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").filter(b("ReQL.bs").getKeyRange(b("ReQLTable").table(f,"contacts").asc,{hd:c.a,tl:0}),b("MWLSContactTypeExactUtils.bs").isIgContact)},[f,JSON.stringify(c.a)])),k;if(g!==void 0){g=g.K;k=g!==void 0&&g!==""?g:null}else k=null;g=b("MWCMThreadTypes.bs").isJoinedCMThread(c.c);var l=b("MessengerMuteUtils.bs").calcMuteUntilMs(c),m=b("MWChatCalculateIsMutedFromExpireTime.bs").useHook(l);l=b("bs_caml").i64_neq(c.u,b("LSRtcCallState.bs").noOngoingCall);var n=i.jsx(b("CometMiddot.react"),{});a=b("bs_caml").i64_eq(c.c,b("MessagingThreadType.bs").oneToOne)&&a?i.jsx(b("LSThreadTitle.bs").make,{thread:c,wrapOutput:function(a,c){return i.jsx(b("LSContactLink.bs").make,{contact:a,children:c})}}):i.jsx(b("LSThreadTitle.bs").make,{thread:c});d={align:"center",isSemanticHeading:!0,type:d,numberOfLines:1,children:[a,i.jsx(b("CometPlaceholder.react"),{children:i.jsx(b("LSVerificationBadge.bs").make,{thread:c,size:"small"}),fallback:null})],testid:"mw_inbox_header_details_title"};e!==void 0&&(d.color=b("bs_caml_option").valFromOption(e));a={align:"center",type:"meta3",numberOfLines:1,children:[k,g?i.jsx(b("MWCMInboxHeaderCommunityGroupName.bs").make,{thread:c}):i.jsxs(i.Fragment,{children:[(l||m)&&k!==null?n:null,l?i.jsx(b("MWChatHeaderDetailsSubtitle.bs").ongoingCall,{}):i.jsx(b("LSPresenceStatusText.bs").make,{thread:c,renderWrapper:function(a){return i.jsxs(i.Fragment,{children:[k!==null?n:null,a,m?n:null]})}})]}),m&&l?n:null,m?i.jsx(b("MWChatHeaderDetailsSubtitle.bs").mutedIcon,{forceInlineDisplay:!0}):null]};e!==void 0&&(a.color=b("bs_caml_option").valFromOption(e));return i.jsxs("div",{className:(h||(h=b("stylex")))(j.container),children:[i.jsx("div",{className:h(j.item,j.title),children:i.jsxs(b("MDSText.react"),d)}),i.jsx("div",{className:h(j.item),children:i.jsxs(b("MDSText.react"),a)})]})}c=a;f.styles=j;f.make=c}),null);
__d("MWInboxHeaderDetailsContainer.bs",["CometLazyDialogTrigger.react","CometPlaceholder.react","CometPressable.react","JSResourceForInteraction","LSContactLink.bs","LSMessagingThreadTypeUtil.bs","MDSRow.react","MDSRowItem.react","MWInboxHeaderDetails.bs","MWLSActor.bs","MWThreadPicture.bs","MWV2GetOtherUser.bs","MWV2GetThreadTitle.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_belt_Option","bs_caml_option","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.thread,d=a.photoSize,e=a.badgeSize,f=a.threadNameSize,g=a.color;a=a.isTitleALink;d=d!==void 0?d:"s_40";e=e!==void 0?e:10;f=f!==void 0?f:"headlineEmphasized3";var i=b("MWLSActor.bs").useActor(void 0),j=b("ReStore.bs").useHook(void 0),k=b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").leftJoin(b("ReQL.bs").getKeyRange(b("ReQLTable").table(j,"participants").asc,{hd:c.a,tl:0}),b("ReQLTable").table(j,"contacts").asc)},[j,JSON.stringify(c.a)])),l=b("MWV2GetOtherUser.bs").useOtherUser(c,k),m=h.jsx(b("MWThreadPicture.bs").make,{photoSize:d,badgeSize:e,thread:c});if(l!==void 0){d=l[1];e=h.jsx(b("LSContactLink.bs").make,{contact:d,children:m,isText:!1,label:d.h})}else e=b("LSMessagingThreadTypeUtil.bs").isGroup(c.c)?h.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResourceForInteraction")("MWLSGroupMembershipDialog.react",{name:"MWLSGroupMembershipDialog","class":"fluid"}).__setRef("MWInboxHeaderDetailsContainer.bs"),dialogProps:{onClose:function(a){}},children:function(a,d){var e=b("bs_belt_Option").getWithDefault(b("MWV2GetThreadTitle.bs").computeThreadTitle(void 0,c,k,i),"");return h.jsx(b("CometPressable.react"),{"aria-label":e,ref:d,onPress:function(c){return b("bs_curry")._1(a,void 0)},overlayDisabled:!0,children:m})}}):m;l={thread:c,threadNameSize:f};g!==void 0&&(l.color=b("bs_caml_option").valFromOption(g));a!==void 0&&(l.isTitleALink=b("bs_caml_option").valFromOption(a));return h.jsx(b("MDSRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",expanding:!0,children:h.jsxs(b("CometPlaceholder.react"),{children:[h.jsx(b("MDSRowItem.react"),{children:e}),h.jsx(b("MDSRowItem.react"),{expanding:!0,children:h.jsx(b("MWInboxHeaderDetails.bs").make,l)})],fallback:null})})}c=a;f.make=c}),null);
__d("MWUseGlobalMuteUntil.bs",["ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_belt_Option","bs_caml_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("ReStore.bs").useHook(void 0);return b("bs_belt_Option").mapWithDefault(b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQLTable").table(c,"notification_settings").asc},[c])),b("bs_caml_int64").zero,function(a){return a.b})}f.useGlobalMuteUntil=a}),null);
__d("MWEditThreadNameDialogTrigger.bs",["CometLazyDialogTrigger.react","JSResource","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.thread;a=a.children;return h.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWV2ThreadNameDialog.react").__setRef("MWEditThreadNameDialogTrigger.bs"),dialogProps:{thread:c,onClose:function(a){}},children:b("bs_curry").__2(a)})}c=a;f.make=c}),null);
__d("MWV2ConversationScrollerRefs.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var b=h.useRef(null),c=h.useRef(0);return h.useMemo(function(){return{scrollerRef:b,scrollPositionRef:c}},[])}f.useHook=a}),null);
__d("MWV2JumpToMostRecentMessage.bs",["MWVisibleMessageContext.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("MWVisibleMessageContext.bs").useHook(void 0),d=c.visibleMessage,e=c.setVisibleMessage,f=h.useCallback(function(b){b=a.current;if(!(b==null))return b.scrollToBottom()},[a]);return h.useCallback(function(a){if(d!==void 0)return b("bs_curry")._1(e,function(a){});else return b("bs_curry")._1(f,void 0)},[f,d,e])}f.useHook=a}),null);
__d("MWV2JumpToMostRecentMessageButton.bs",["fbt","CurrentUser","MWPThreadTheme.bs","MWV2ColorUtils.bs","MWV2JumpToMostRecentMessage.bs","ODS","TetraCircleButton.react","bs_curry","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={root:{position:"l9j0dhe7",width:"k4urcfbm",height:"do00u71z"},button:{position:"pmk7jnqg",bottom:"i09qtzwb",start:"kfkz5moi",marginStart:"pg7hd1hw",backgroundColor:"nred35xi",transform:"n9g6laej",transitionProperty:"flx89l3n",transitionDuration:"kmdw4o4n",transitionTimingFunction:"heur4gxb",zIndex:"tghn160j",boxShadow:"oyvrxjdn",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"},visible:{transform:"amx3n8jj"}};function a(a){var c=a.scrollerRefs,d=a.visible,e=a.onPress;a=b("MWPThreadTheme.bs").useHook(void 0);var f=a.threadTheme,h=b("MWV2JumpToMostRecentMessage.bs").useHook(c.scrollerRef);return j.useMemo(function(){return j.jsx("div",{className:(i||(i=b("stylex")))(k.root),children:j.jsx("div",{className:i(k.button,d?k.visible:!1),children:j.jsx(b("TetraCircleButton.react"),{color:"white",disabled:!d,icon:function(a){a=b("MWV2ColorUtils.bs").int64ToHex(f.c);return j.jsx("svg",{width:"18",height:"18",viewBox:"7 7 22 22",fill:"none",children:j.jsx("path",{d:"M24.616 18.366a1.25 1.25 0 011.768 1.768l-7.5 7.5a1.25 1.25 0 01-1.768 0l-7.5-7.5a1.25 1.25 0 011.768-1.768l4.94 4.94a.25.25 0 00.426-.177V9.25a1.25 1.25 0 112.5 0v13.879c0 .222.27.334.427.176l4.94-4.939z",fill:a})})},label:g._(/*FBT_CALL*/"Go to most recent message"/*FBT_CALL*/),onPress:function(a){b("bs_curry")._1(h,void 0);b("bs_curry")._1(e,void 0);a=b("CurrentUser").getAppID();a=a==null?"unknown":a;b("ODS").bumpEntityKey(3185,"mw_jump_to_bottom","app_id."+a)},size:40})})})},[h,e,d,f])}c=a;f.styles=k;f.make=c}),null);
__d("MWV2MessageScroller.bs",["LSMailboxMessagesRangeQueryDirection.bs","MWChatConversationScroller.bs","MWLSThreadDisplayContext.bs","MWV2IsTabFocusedContext.bs","UserActivity","bs_belt_Option","bs_caml","bs_caml_option","bs_curry","cr:10880","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){var d=b("MWV2IsTabFocusedContext.bs").useContext(void 0),e=b("MWLSThreadDisplayContext.bs").useHook(void 0),f=e===0?d:!0,g;if(c!==void 0){e=b("bs_caml").i64_gt(c.b,a.i)?c.b:a.i;g=b("bs_caml").i64_gt(e,a.j)}else g=!1;return h.useCallback(function(a){if(b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&f)return g;else return!1},[f,g])}function j(a,c,d){var e=i(a,c);return h.useCallback(function(a){if(b("bs_curry")._1(e,void 0))return b("bs_curry")._1(d,void 0)},[e,d])}function k(a,c){h.useEffect(function(){var d=function(d){if(a.current===0)return b("bs_curry")._1(c,void 0)},e=b("bs_belt_Option").getExn(b("bs_caml_option").undefined_to_opt(typeof window==="undefined"?void 0:window));e.addEventListener("focus",d);document.hasFocus()&&a.current===0&&b("bs_curry")._1(c,void 0);return function(a){e.removeEventListener("focus",d)}},[c,a])}var l=b("cr:10880")==null?function(a){}:b("cr:10880").useHook;function a(a){var c=a.children,d=a.thread,e=a.fetchMore,f=a.markThreadAsRead,g=a.lastMessageToCalculateIfThreadIsRead,i=a.scrollerRefs,m=a.hasMoreBefore,n=a.hasMoreAfter;a=a.onScroll;a=a!==void 0?a:function(a){};var o=i.scrollPositionRef,p=j(d,g,f);b("bs_curry")._1(l,d);k(o,p);return h.jsx(b("MWChatConversationScroller.bs").make,{children:c,scrollPositionRef:o,dispatch:function(a){switch(a){case 0:if(m)return b("bs_curry")._1(e,b("LSMailboxMessagesRangeQueryDirection.bs").before);else return;case 1:if(n)return b("bs_curry")._1(e,b("LSMailboxMessagesRangeQueryDirection.bs").after);else return b("bs_curry")._1(p,void 0);case 2:return b("bs_curry")._1(e,b("LSMailboxMessagesRangeQueryDirection.bs").before)}},hasMoreAfter:n,onScroll:a,ref:i.scrollerRef})}c=a;f.$MAWThreadEvent$OR$null$requireCond=b("cr:10880");f.make=c}),null);
__d("MWV2ThreadNullstate.bs",["fbt","CometLink.react","CometPressable.react","CometScrollableArea.react","FBID.bs","LS.bs","LSMailboxType.bs","LSNullstateCTAType.bs","LSOptimisticSendMessage","LSThreadAttributionStore.bs","LSThreadAttributionTypeUtil.bs","LSThreadTitle.bs","LSTransaction.bs","LsBotComposerQuickReplyTappedFalcoEvent","LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent","LsFalcoEventEntryPoint.bs","MDSText.react","MWLSActor.bs","MWMDotMeReferrerContext.bs","MessageSendClickFalcoEvent","ReStore.bs","bs_caml","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","gkx","promiseDone","qex","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={old_pill:{alignItems:"bp9cbjyn",backgroundColor:"nred35xi",borderTopStartRadius:"emml16de",borderTopEndRadius:"gmcszhul",borderBottomEndRadius:"ols5edhi",borderBottomStartRadius:"gob819ct",boxShadow:"rm35z8s5",boxSizing:"rq0escxv",color:"oo9gr5id",display:"pq6dq46d",fontSize:"jq4qci2q",fontWeight:"b1v8xokw",justifyContent:"taijpn5t",marginTop:"rs0gx3tq",marginEnd:"oi9244e8",marginBottom:"dicw6rsg",marginStart:"h676nmdw",overflowWrap:"jm1wdb64",paddingTop:"fdg1wqfs",paddingBottom:"ae35evdt",paddingEnd:"d1544ag0",paddingStart:"tw6a2znq",wordBreak:"qv66sw1b"},new_pill:{alignItems:"bp9cbjyn",backgroundColor:"nred35xi",borderTopStartRadius:"emml16de",borderTopEndRadius:"gmcszhul",borderBottomEndRadius:"ols5edhi",borderBottomStartRadius:"gob819ct",boxShadow:"rm35z8s5",boxSizing:"rq0escxv",color:"pb8n47oa",display:"pq6dq46d",fontSize:"jq4qci2q",fontWeight:"b1v8xokw",justifyContent:"taijpn5t",marginTop:"rs0gx3tq",marginEnd:"oi9244e8",marginBottom:"dicw6rsg",marginStart:"h676nmdw",overflowWrap:"jm1wdb64",paddingTop:"fdg1wqfs",paddingBottom:"ae35evdt",paddingEnd:"d1544ag0",paddingStart:"tw6a2znq",wordBreak:"qv66sw1b"}};function l(a){var c=a.onClick;a=a.children;return j.jsx(b("CometPressable.react"),{onPress:c,overlayDisabled:!0,xstyle:function(a){return[b("qex")._("885")===!0?k.new_pill:k.old_pill]},children:a})}c={styles:k,make:l};var m={welcome_text:{paddingBottom:"jfpizvyy",paddingEnd:"dflh9lhu",paddingStart:"scb9dxdr"},privacy_text:{paddingBottom:"ofv0k9yr",paddingEnd:"dflh9lhu",paddingStart:"scb9dxdr"},privacy_text_offset:{paddingTop:"ecm0bbzt",paddingBottom:"pby63qed"},cta_list:{display:"j83agx80",flexDirection:"cbu4d94t",alignItems:"aovydwv3",justifyContent:"taijpn5t",marginTop:"kvgmc6g5",marginEnd:"cxmmr5t8",marginBottom:"oygrvhab",marginStart:"hcukyx3x"},old_cta_list_item:{paddingStart:"c088b7cy",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw"},new_cta_list_item:{alignSelf:"o8rfisnq",paddingStart:"tw6a2znq",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",textAlign:"oqcyycmt"},cta_list_item_center:{alignSelf:"o8rfisnq",paddingEnd:"d1544ag0",paddingStart:"tw6a2znq"}};function n(a,c,d){var e=b("ReStore.bs").useHook(void 0),f=b("MWLSActor.bs").useActor(void 0),g=b("MWMDotMeReferrerContext.bs").useContext(void 0);return j.useCallback(function(h){return function(i){var j=b("LSThreadAttributionStore.bs").getSource(c,b("bs_int64").to_string(a.a)),k=b("LSThreadAttributionTypeUtil.bs").toLSThreadAttribution(j);j=h!==void 0?b("bs_caml").i64_eq(h.f,b("LSNullstateCTAType.bs").getStarted)&&b("bs_caml_obj").caml_equal(h.g,i.a):!1;var l=j?g:void 0;b("promiseDone")(b("LSTransaction.bs").run(e,function(c){return b("LSOptimisticSendMessage")(f,a.a,a.c,b("LSMailboxType.bs").messenger,i.c,void 0,void 0,void 0,void 0,void 0,void 0,k,l!==void 0?b("bs_caml_option").valFromOption(l):void 0,i.e!==void 0?b("bs_caml_option").valFromOption(i.e):void 0,void 0,void 0,void 0,void 0,void 0,!0,!0,void 0,d!==void 0?b("bs_caml_option").valFromOption(d):void 0,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite"),void 0,void 0);var m=b("FBID.bs").ofString(b("bs_int64").to_string(a.a)),n=function(a){if(m===void 0)return;var c=b("bs_caml_option").valFromOption(m);b("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent").log(function(a){return{page:{id:c}}})},o=function(a){if(m===void 0)return;var c=b("bs_caml_option").valFromOption(m);b("LsBotComposerQuickReplyTappedFalcoEvent").log(function(a){return{page:{id:c},quick_reply:{id:"",type:64},display:void 0}})};j?n(void 0):o(void 0);b("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:b("LsFalcoEventEntryPoint.bs").icebreaker}}})}},[e,f,b("bs_int64").to_string(a.a),c,g])}function a(a){var c=a.thread,d=a.nullstate,e=a.nullstateCtas,f=a.lsSource;a=a.initiatingSource;f=f!==void 0?f:"unknown";var h=n(c,f,a);f=g._(/*FBT_CALL*/"Tap to send"/*FBT_CALL*/);a=g._(/*FBT_CALL*/"Choose an option or type your own message."/*FBT_CALL*/);c=g._(/*FBT_CALL*/"When you send a message, {name} will see your"/*FBT_CALL*/,[g._param("name",j.jsx(b("LSThreadTitle.bs").make,{thread:c,wrapOutput:function(a,b){return b}}))]);var k=g._(/*FBT_CALL*/"public info"/*FBT_CALL*/),o=d.b,p=d.c,q=d.c;o=j.jsxs("div",{children:[o!==void 0&&e.length!==0?b("qex")._("885")===!0?j.jsx("div",{className:(i||(i=b("stylex")))(m.welcome_text),children:j.jsx(b("MDSText.react"),{align:"center",color:"secondary",type:"headline4",children:f})}):j.jsx("div",{className:(i||(i=b("stylex")))(m.welcome_text),children:j.jsx(b("MDSText.react"),{align:"center",color:"secondary",type:"headline4",children:a})}):null,p!==void 0&&b("qex")._("885")===!1?j.jsx("div",{className:(i||(i=b("stylex")))(m.privacy_text),children:j.jsx(b("MDSText.react"),{align:"center",color:"secondary",type:"body4",children:p})}):null,j.jsx("ul",{className:(i||(i=b("stylex")))(m.cta_list),children:e.map(function(a){var c=b("bs_caml").i64_eq(d.f,b("LSNullstateCTAType.bs").getStarted)&&b("bs_caml_obj").caml_equal(d.g,a.a);return j.jsx("li",{className:(i||(i=b("stylex")))(b("qex")._("885")===!0?m.new_cta_list_item:m.old_cta_list_item,c?m.cta_list_item_center:!1),children:j.jsx(l,{onClick:function(c){return b("bs_curry")._2(h,d,a)},children:a.c})},b("bs_int64").to_string(a.a))})}),q!==void 0&&b("qex")._("885")===!0?j.jsx("div",{className:(i||(i=b("stylex")))(m.privacy_text),children:j.jsxs(b("MDSText.react"),{align:"center",color:"secondary",type:"body4",children:[c," ",j.jsx(b("CometLink.react"),{href:"https://www.facebook.com/help/messenger-app/719578818758231",color:"primary",target:"_blank",role:"link",children:k}),"."]})}):null]});if(b("gkx")("366"))return j.jsx(b("CometScrollableArea.react"),{xstyle:m.privacy_text_offset,children:o});else return o}d=a;f.Pill=c;f.styles=m;f.useSendIcebreakerMessage=n;f.make=d}),null);
__d("MWV2PersistentIcebreakers.bs",["MWChatBusinessQuickReplyList.bs","MWTheme.bs","MWV2ThreadNullstate.bs","bs_caml_int64","bs_curry","bs_int64","qex","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");function a(a,c,d){var e=b("qex")._("438");e=e==null?999999999:e|0;if(!(c.length!==0&&((d|0)-b("bs_caml_int64").to_int32(a.i)|0)>=e))return!1;c=b("qex")._("278");if(c==null)return!1;else return c}function c(a){var c=a.thread,d=a.nullstateCtas,e=a.lsSource;a=a.initiatingSource;e=e!==void 0?e:"unknown";var f=b("MWV2ThreadNullstate.bs").useSendIcebreakerMessage(c,e,a);c=b("MWTheme.bs").useTheme(void 0);return i.jsx("div",{className:(h||(h=b("stylex")))(b("MWChatBusinessQuickReplyList.bs").styles.container,b("MWTheme.bs").isGradient(c)?b("MWChatBusinessQuickReplyList.bs").styles.mask:!1),children:i.jsx("ul",{className:h(b("MWChatBusinessQuickReplyList.bs").styles.pillContainerVertical),children:d.map(function(a){if(a.d==="nullstate_icebreaker")return i.jsx("li",{className:(h||(h=b("stylex")))(b("qex")._("885")===!0?b("MWV2ThreadNullstate.bs").styles.new_cta_list_item:b("MWV2ThreadNullstate.bs").styles.old_cta_list_item),children:i.jsx(b("MWV2ThreadNullstate.bs").Pill.make,{onClick:function(c){return b("bs_curry")._2(f,void 0,a)},children:a.c})},b("bs_int64").to_string(a.a));else return null})})})}d=c;f.shouldShowPersistentIcebreakers=a;f.make=d}),null);
__d("CometTokenizerLayoutContextualStrategy.react",["CometTokenizerInternalLayoutContextualStrategy.react","CometTypeaheadHelperText.react","react","useCometInternalTypeaheadFetch","useCometInternalTypeaheadState","useCometTokenizerInternalLayoutContextualStrategyHandlers","useCometTypeaheadInputRefs","useCometTypeaheadLayoutContextualStrategyARIAProps","useCometTypeaheadLayoutStrategyStyles"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={view:{backgroundColor:"cwj9ozl2",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",maxHeight:"nu4hu5il",minHeight:"e9s0xebz"}};function a(a,b){var d=a.extraLayoutProps;d=d===void 0?{}:d;var e=d.afterViewContent;d=d.beforeViewContent;var f=a.helperText,g=a.isDisabled,j=a.label,k=a.onAbandonTypeahead_DO_NOT_USE,l=a.onBackspace,m=a.onBlur,n=a.onChange,o=a.onClick,p=a.onDownArrow,q=a.onEnter,r=a.onEscape,s=a.onHighlightEntry,t=a.onOutsideClick,u=a.onPressEntry,v=a.onRemoveEntry,w=a.onShiftTab,x=a.onTab,y=a.onUpArrow,z=a.queryString,A=a.viewRole,B=a.selectedEntries,C=a.xstyles;C=C===void 0?{}:C;var D=C.viewXStyle_DO_NOT_USE;C=babelHelpers.objectWithoutPropertiesLoose(C,["viewXStyle_DO_NOT_USE"]);a=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","isDisabled","label","onAbandonTypeahead_DO_NOT_USE","onBackspace","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onRemoveEntry","onShiftTab","onTab","onUpArrow","queryString","viewRole","selectedEntries","xstyles"]);b=c("useCometTypeaheadInputRefs")(b);var E=b.composedRef;b=b.inputRef;var F=c("useCometInternalTypeaheadState")(),G=F.activeEntries,H=F.highlightedEntry;F=F.isOpened;var I=c("useCometInternalTypeaheadFetch")();I=I.isLoading;b=c("useCometTokenizerInternalLayoutContextualStrategyHandlers")({inputRef:b,isDisabled:g,onAbandonTypeahead_DO_NOT_USE:k,onBackspace:l,onBlur:m,onChange:n,onClick:o,onDownArrow:p,onEnter:q,onEscape:r,onHighlightEntry:s,onOutsideClick:t,onPressEntry:u,onRemoveEntry:v,onShiftTab:w,onTab:x,onUpArrow:y,queryString:z,selectedEntries:B});k=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:G,helperText:f,highlightedEntry:H,inputLabel:j,isOpened:F,viewRole:A});l=c("useCometTypeaheadLayoutStrategyStyles")({xstyles:babelHelpers["extends"]({},C,{viewXStyle_DO_NOT_USE:[i.view,D]})});return h.jsx(c("CometTokenizerInternalLayoutContextualStrategy.react"),babelHelpers["extends"]({},a,b,{extraLayoutProps:{afterViewContent:e,ariaProps:k,beforeViewContent:d,helperTextComponent:f!=null?h.jsx(c("CometTypeaheadHelperText.react"),{text:f}):null,isLoading:I,isOpened:F},helperText:f,isDisabled:g,label:j,queryString:z,ref:E,selectedEntries:B,viewRole:A,xstyles:l}))}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("MWChatTokenizerLayoutContextualStrategy.react",["fbt","CometTokenizerLayoutContextualStrategy.react","CurrentUser","gkx","react","stylex","useCometInternalTypeaheadStateDispatcher"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useEffect,k=b.useMemo,l={layout:{height:"datstx6m",width:"k3oul89m"},root:{display:"j83agx80"},to:{color:"oo9gr5id",fontSize:"jq4qci2q",fontWeight:"knj5qynh",lineHeight:"a3bd9o3v",marginStart:"dhix69tm",marginTop:"aov4n071",position:"pmk7jnqg"},typeaheadInput:{backgroundColor:"nred35xi",boxSizing:"rq0escxv",display:"a8c37x1j",paddingEnd:"dflh9lhu",paddingStart:"jxo0map8"},view:{backgroundColor:"nred35xi",borderTop:"opwvks06",flexShrink:"g5gj957u",maxHeight:"nyzjzqfi",minHeight:"b8v32qnc",overflowY:"eg9m0zos",width:"jbcpqwzg","@media (min-height: 1280px)":{maxHeight:"gbk4by2p",minHeight:"a3d5bthu"}}};function a(a,b){a===void 0&&(a=!1);b===void 0&&(b="root");function d(d,e){var f=d.xstyles;f=f===void 0?{}:f;var g=f.viewXStyle_DO_NOT_USE;f=babelHelpers.objectWithoutPropertiesLoose(d,["xstyles"]);d=c("useCometInternalTypeaheadStateDispatcher")();var m=d.dispatchIsOpened;j(function(){(a||!c("gkx")("1526694")||c("CurrentUser").isWorkUser())&&m(!0)},[]);d=k(function(){return{inputXStyle:[l.typeaheadInput],layoutXStyle:[l.layout],viewXStyle_DO_NOT_USE:[l.view,g]}},[g]);return i.jsxs("div",{className:c("stylex")(l.root),children:[i.jsx("div",{"aria-hidden":"true",className:c("stylex")(l.to),children:h._(/*FBT_CALL*/"To:"/*FBT_CALL*/)}),i.jsx(c("CometTokenizerLayoutContextualStrategy.react"),babelHelpers["extends"]({},f,{contextualProps:{align:"start",disableAutoFlip:!0},label:h._(/*FBT_CALL*/"Send message to"/*FBT_CALL*/),layerContext:b,ref:e,xstyles:d}))]})}d.displayName=d.name+" [from "+f.id+"]";return i.forwardRef(d)}g.createMWChatTokenizerLayoutContextualStrategy=a}),98);
__d("MWV2OnAuthoritativeThreadInsert.bs",["LSAuthorityLevel.bs","ReQL.bs","ReQLTable","SortedAsyncIterable.bs","bs_caml","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){c=b("ReQLTable").table(c,"threads").index("clientThreadKey");c=c.asc;a=a[0];var e={contents:function(a){}};e.contents=b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").getKeyRange(c,{hd:a,tl:0}),function(a,c){if(typeof c==="number")return;a=c._0;if(b("bs_caml").i64_eq(a.Z,b("LSAuthorityLevel.bs").authoritative)){b("bs_curry")._1(d,a);return b("bs_curry")._1(e.contents,void 0)}})}f.onAuthoritativeThreadInsert=a}),null);
__d("MWThreadPreview.bs",["CometErrorBoundary.re","CometProgressRingIndeterminate.react","CometTransientDialogProvider.react","FBID.bs","LS.bs","LSAuthorityLevel.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSDatabaseType.bs","LSInt64.bs","LSLocalCreateOptimisticGroupThread","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","LSVec.bs","LSVerifyContactRowExists","LSVerifyThreadRowExists","MWChatConnectionStatusCard.bs","MWChatTabNew.bs","MWLSActor.bs","MWThreadKey.bs","MWThread_DEPRECATED.bs","MWUIChatTabState.bs","MWV2OnAuthoritativeThreadInsert.bs","MessengerWebEvent","MessengerWebEventsFalcoEvent.bs","Promise","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","bs_caml_format","bs_caml_option","bs_curry","bs_int64","promiseDone","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={spinner:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",flexGrow:"buofh1pr"},threadPreviewContainer:{display:"j83agx80",flexBasis:"rj1gh0hx",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",fontSize:"jq4qci2q",zIndex:"du4w35lb"}};function a(a,b){}var k=i.createContext({hasContent:{contents:!1},isTabFocused:!1,onBeforeOpenTabForGroup:function(a){},openTabForUser:a,openTabForGroup:a,openTabForPage:a,submitted:!1});function l(a){var c=a.children,d=a.hasContent,e=a.isTabFocused,f=a.onBeforeOpenTabForGroup,g=a.openTabForUser,h=a.openTabForGroup;a=a.openTabForPage;var j=i.useState(function(){return!1}),l=j[1],m=i.useCallback(function(a){b("bs_curry")._1(l,function(a){return!0});return b("bs_curry")._1(f,void 0)},[l,f]);j=j[0];d={hasContent:d,isTabFocused:e,onBeforeOpenTabForGroup:m,openTabForUser:g,openTabForGroup:h,openTabForPage:a,submitted:j};return i.createElement(k.Provider,{value:d,children:c})}d={make:l};function m(a){var c=a.thread;a=c.a;var d=c.O,e=d!==void 0?b("LSInt64.bs").string(d)===b("LSInt64.bs").string(a):!1;d=b("LSMessagingThreadTypeUtil.bs").isGroup(a)||e?{NAME:"Group",VAL:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a))}:{NAME:"User",VAL:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a))};var f=i.useContext(k),g=f.submitted,l=f.openTabForGroup,m=f.onBeforeOpenTabForGroup,n=i.useMemo(function(){return function(a,c){b("bs_curry")._1(m,void 0);if(!e)return l(a,c)}},[l,e,m]);i.useEffect(function(){var a=c.O;a!==void 0&&g&&b("bs_int64").to_string(a)!==b("bs_int64").to_string(c.a)&&l(b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.a)),!1)},[c,l,g]);return i.jsx("div",{className:(h||(h=b("stylex")))(j.threadPreviewContainer),children:i.jsx(b("MWThread_DEPRECATED.bs").make,{id:d,children:i.jsx(b("MWThreadKey.bs").make,{id:a,children:i.jsx(b("MWUIChatTabState.bs").Provider.make,{tab:{_0:d},children:i.jsx(b("CometTransientDialogProvider.react"),{children:i.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:i.jsx(b("MWChatTabNew.bs").ExistingThreadPreview.make,{isTabFocused:f.isTabFocused,hasContent:f.hasContent,openTabForGroup:n,openTabForUser:f.openTabForUser,openTabForPage:f.openTabForPage,isOptimisticThread:e})})})})})})})}e={make:m};function n(a){var c=a.threadKey,d=a.threadType,e=b("ReStore.bs").useHook(void 0);i.useEffect(function(){b("promiseDone")(b("LSTransaction.bs").run(e,function(a){return b("LSVerifyThreadRowExists")(b("bs_caml_format").caml_int64_of_string(c),d,b("LSDatabaseType.bs").mailbox,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite"),void 0,void 0)},[e,c,d]);a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(e,"threads").asc,{hd:b("bs_caml_format").caml_int64_of_string(c),tl:0})},[e,c]));if(a!==void 0)return i.jsx(m,{thread:a});else return i.jsx("div",{className:(h||(h=b("stylex")))(j.spinner),children:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})})}var o={make:n};function p(a){var c=a.tokens,d=a.tokenContactIds,e=b("ReStore.bs").useHook(void 0),f=b("bs_int64").to_string(b("MWLSActor.bs").useActor(void 0)),g=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQLTable").table(e,"participants").asc,function(a){return d.has(b("bs_int64").to_string(a.b))}),function(a){return b("bs_int64").to_string(a.a)})},[e,d])),k=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=new Set(g);return b("ReQL.bs").filter(b("ReQL.bs").filter(b("ReQL.bs").filter(b("ReQLTable").table(e,"threads").asc,function(a){return a.d===void 0}),function(c){c=c.O;if(c!==void 0)return a.has(b("bs_int64").to_string(c));else return!1}),function(a){a=a.O;if(a===void 0)return!1;a=b("ReQLSuspense.bs").toArray(b("ReQL.bs").filter(b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(e,"participants").index("threadKeyReadWatermarkTimestampMs").desc,{hd:a,tl:0}),function(a){return b("bs_int64").to_string(a.b)}),function(a){return a!==f}));if(a.every(function(a){return d.has(a)}))return a.length===d.size;else return!1})},[e,g,d,f])),l=i.useCallback(function(a){return b("LSTransaction.bs").run(e,function(c){return b("LSLocalCreateOptimisticGroupThread")(b("LSVec.bs").make(a),void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite")},[e]),n=function(a){return b("MessengerWebEventsFalcoEvent.bs").log(function(){return{event_name:b("MessengerWebEvent").CREATE_THREAD}})};i.useEffect(function(){if(k===void 0){var a=b("bs_curry")._1(l,c.map(function(a){return b("bs_caml_format").caml_int64_of_string(a.b)}));a.then(function(a){b("MWV2OnAuthoritativeThreadInsert.bs").onAuthoritativeThreadInsert(a,e,n);return b("Promise").resolve(void 0)})}},[e,c,k]);if(k!==void 0)return i.jsx(m,{thread:k});else return i.jsx("div",{className:(h||(h=b("stylex")))(j.spinner),children:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})})}var q={make:p};function r(a){var c=a.tokens,d=b("ReStore.bs").useHook(void 0),e=b("bs_int64").to_string(b("MWLSActor.bs").useActor(void 0)),f=i.useMemo(function(){return new Set(c.map(function(a){return a.b}))},[c]),g=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQLTable").table(d,"participants").asc,function(a){return f.has(b("bs_int64").to_string(a.b))}),function(a){return b("bs_int64").to_string(a.a)})},[d,f]));a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){var a=new Set(g);return b("ReQL.bs").filter(b("ReQL.bs").filter(b("ReQL.bs").filter(b("ReQLTable").table(d,"threads").asc,function(a){return a.d===void 0}),function(c){return a.has(b("bs_int64").to_string(c.a))}),function(a){a=b("ReQLSuspense.bs").toArray(b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"participants").index("threadKeyReadWatermarkTimestampMs").desc,{hd:a.a,tl:0}),function(a){return b("bs_int64").to_string(a.b)}));var c=a.filter(function(a){return a!==e});if(a.length===c.length||c.length!==f.size)return!1;else return c.every(function(a){return f.has(a)})})},[d,g,f,e]));i.useEffect(function(){c.forEach(function(a){b("LSTransaction.bs").run(d,function(c){return b("LSVerifyContactRowExists")(b("bs_caml_format").caml_int64_of_string(a.b),b("LSContactIdType.bs").fbid,a.g,a.f,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,a.l,void 0,!1,b("LSAuthorityLevel.bs").clientPartial,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite")})},[d,f]);if(a!==void 0)return i.jsx(m,{thread:a});else return i.jsx(p,{tokens:c,tokenContactIds:f})}var s={make:r};function c(a){var c=a.tokens,d=a.hasContent,e=a.isTabFocused,f=a.onBeforeOpenTabForGroup,g=a.openTabForUser,h=a.openTabForGroup,j=a.openTabForPage;a=a.empty;d=d!==void 0?d:{contents:!0};e=e!==void 0?e:!0;f=f!==void 0?f:function(a){};a=a!==void 0?b("bs_caml_option").valFromOption(a):null;var k=b("bs_int64").to_string(b("MWLSActor.bs").useActor(void 0)),m=i.useMemo(function(){var a=[];c.forEach(function(b){b=b.getRawData();b=b.serverSearchResult;if(b!==void 0){a.push(b);return}});return a},[c]),o,p=0,q=m.length;if(q>=3)p=1;else switch(q){case 0:o=a;break;case 1:q=m[0];o=i.jsx(n,{threadKey:q.b,threadType:q.e});break;case 2:a=m[0];q=m[1];a.b===k?o=i.jsx(n,{threadKey:q.b,threadType:q.e}):q.b===k?o=i.jsx(n,{threadKey:a.b,threadType:a.e}):p=1;break}p===1&&(o=i.jsx(r,{tokens:m.filter(function(a){return a.b!==k})}));return i.jsxs(l,{children:[i.jsx(b("MWChatConnectionStatusCard.bs").make,{}),o],hasContent:d,isTabFocused:e,onBeforeOpenTabForGroup:f,openTabForUser:g,openTabForGroup:h,openTabForPage:j})}c=c;f.styles=j;f.noOp=a;f.context=k;f.MWThreadPreviewContextProvider=d;f.ThreadPreview=e;f.OneOnOnePreview=o;f.GroupPreviewOptimistic=q;f.GroupPreview=s;f.make=c}),null);
__d("MWV2ContextBanner.bs",["LSMessagingThreadTypeUtil.bs","LSNullstateDescriptionType.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LSThreadTitle.bs","MDSText.react","MWThreadPicture.bs","MessagingThreadType.bs","RecoverableViolation.react","bs_caml","bs_caml_int64","bs_caml_option","cr:1244","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j=b("cr:1244")==null?void 0:b("bs_caml_option").some(b("cr:1244")),k={wrapper:{paddingBottom:"f10w8fjw"}};function l(a){var c=a.kind;a=a.text;if(b("bs_caml").i64_eq(c,b("bs_caml_int64").zero)||b("bs_caml").i64_eq(c,b("LSNullstateDescriptionType.bs").subtext)||b("bs_caml").i64_eq(c,b("LSNullstateDescriptionType.bs").titleSmallDefault)||b("bs_caml").i64_eq(c,b("LSNullstateDescriptionType.bs").titleSmallSubtext))return i.jsx("div",{className:(h||(h=b("stylex")))(k.wrapper),children:i.jsx(b("MDSText.react"),{align:"center",color:"secondary",type:"body4",children:a})});else return i.jsx(b("RecoverableViolation.react"),{errorMessage:"Unhandled nullstate description",projectName:"messenger_comet"})}c={styles:k,make:l};var m={container:{paddingTop:"aodizinl",paddingBottom:"f10w8fjw",paddingEnd:"d1544ag0",paddingStart:"tw6a2znq"},image:{display:"j83agx80",justifyContent:"taijpn5t",marginBottom:"n851cfcs"},title:{marginBottom:"n851cfcs"}};function n(a){var c=a.thread;a=a.showQuickActions;a=a!==void 0?a:!0;var d=c.G,e=c.F,f=c.E,g=c.D,k=c.C,n=c.B;return i.jsxs("div",{className:(h||(h=b("stylex")))(m.container),children:[i.jsx("div",{className:h(m.image),children:i.jsx(b("MWThreadPicture.bs").make,{photoSize:"s_60",badgeSize:14,thread:c})}),i.jsx("div",{className:h(m.title),children:i.jsx(b("MDSText.react"),{align:"center",type:"headlineEmphasized3",children:i.jsx(b("LSThreadTitle.bs").make,{thread:c,wrapOutput:function(a,b){return b}})})}),n!==void 0&&k!==void 0?i.jsx(l,{kind:k,text:n}):null,g!==void 0&&f!==void 0?i.jsx(l,{kind:f,text:g}):null,e!==void 0&&d!==void 0?i.jsx(l,{kind:d,text:e}):null,!(b("cr:1244")==null)&&b("LSMessagingThreadTypeUtil.bs").isGroup(c.c)&&b("bs_caml").i64_neq(c.c,b("MessagingThreadType.bs").communityGroup)&&a?i.jsx(j.make,{thread:c}):null]})}d={styles:m,make:n};function a(a){var c=a.thread;a=a.showQuickActions;a=a!==void 0?a:!0;var d=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").disableContextBanner,c);if(d)return null;else return i.jsx(n,{thread:c,showQuickActions:a})}e=a;f.$MWContextBannerQuickActions$requireCond=b("cr:1244");f.NullstateDescription=c;f.Impl=d;f.make=e}),null);
__d("MWV2OpenThreadDetail.bs",["LS.bs","LSAuthorityLevel.bs","LSMessagingInitiatingSourceHook.bs","LSOptimisticMarkThreadReadV2","LSTransaction.bs","MWChatLoadMoreItemsIncrementally.bs","MWChatUnsendNUX.bs","MWInboxThreadMessagesSpinner.bs","MWPMessageListColumn.bs","MWV2ContextBanner.bs","MWV2ConversationScrollerRefs.bs","MWV2CurrentVisibleMessage.bs","MWV2FetchMessagesPage.bs","MWV2JumpToMostRecentMessageButton.bs","MWV2MessageList.bs","MWV2MessageScroller.bs","MWV2PersistentIcebreakers.bs","MWV2QuickReplies.bs","MWV2ThreadNullstate.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","ServerTime","SortedAsyncIterable.bs","bs_caml","bs_caml_array","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","clearTimeout","cr:11088","promiseDone","qex","react","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){var d=b("bs_int64").compare(a.c,c.c);if(d!==0)return d;d=a.d;var e=c.d;if(d===void 0)if(e!==void 0)return-1;else return b("bs_int64").compare(a.b,c.b);if(e===void 0)return 1;d=b("bs_int64").compare(d,e);if(d!==0)return d;else return b("bs_int64").compare(a.b,c.b)}function j(a,c){var d=b("ReStore.bs").useHook(void 0),e=b("ReQLSubscription.bs").useArray(h.useMemo(function(){var e=b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"messages").asc,{hd:c.a,tl:0});if(a!==void 0)return b("ReQL.bs").bounds(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"messages").asc,{hd:c.a,tl:0}),{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:a.b,tl:0}},{NAME:"lessThanOrEqual",VAL:{hd:a.d,tl:0}}]});else if(b("bs_caml").i64_lt(c.Z,b("LSAuthorityLevel.bs").authoritative))return e;else return b("SortedAsyncIterable.bs").empty(void 0)},[d,JSON.stringify(c.a),JSON.stringify(c.Z),JSON.stringify(a)]));return h.useMemo(function(){return e.sort(i)},[e])}function k(a){var c=b("ReStore.bs").useHook(void 0);return h.useCallback(function(d){if(b("bs_caml").i64_ge(a.Z,b("LSAuthorityLevel.bs").authoritative)){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSOptimisticMarkThreadReadV2")(a.a,b("bs_caml_int64").of_float(Date.now()),b("bs_curry")._1(b("LS.bs").make,c))},"readWrite"),void 0,void 0);return}},[JSON.stringify(a.Z),JSON.stringify(a.a),c])}function l(a){var c=b("ReStore.bs").useHook(void 0),d=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"thread_nullstate").asc,{hd:a.a,tl:0})},[c,JSON.stringify(a.a)])),e=b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"thread_nullstate_ctas").index("threadKeyCtaId").asc,{hd:a.a,tl:0})},[c,JSON.stringify(a.a)]));return[d,e]}function a(a){var c=a.thread;a=a.showContextBannerQuickActions;var d=h.useState(function(){return b("ServerTime").getMillis()}),e=b("MWV2ConversationScrollerRefs.bs").useHook(void 0),f=h.useState(function(){return!0}),g=f[1],i=b("MWV2CurrentVisibleMessage.bs").useHook(c,e.scrollerRef),m=i.visibleMessage,n=i.messageRange,o=i.messageRange;m=b("MWChatLoadMoreItemsIncrementally.bs").useLoadMore(m!==void 0?!0:n!==void 0?n.i:!1,void 0,void 0,j(i.messageRange,c),b("MWV2FetchMessagesPage.bs").useFetchMessagesPage(i.messageRange,c.a),o!==void 0?o.h:!1);n=m[2];o=m[0];var p=i.messageRange;p=p!==void 0?p.i:!1;var q=k(c),r=l(c),s=r[1];r=r[0];var t=b("LSMessagingInitiatingSourceHook.bs").useHook(void 0),u=b("cr:11088")==null?null:h.jsx(b("cr:11088").make,{thread:c});d=b("MWV2PersistentIcebreakers.bs").shouldShowPersistentIcebreakers(c,s,d[0]);var v=b("bs_caml_obj").caml_equal(b("bs_caml_option").nullable_to_opt(b("qex")._("297")),"enabled"),w={contents:void 0},x=v?function(a){a=w.contents;a!==void 0&&b("clearTimeout")(b("bs_caml_option").valFromOption(a));a=e.scrollPositionRef.current;a===0?w.contents=b("bs_caml_option").some(b("setTimeout")(function(a){return b("bs_curry")._1(g,function(a){return!0})},0)):w.contents=b("bs_caml_option").some(b("setTimeout")(function(a){return b("bs_curry")._1(g,function(a){return!1})},200))}:function(a){};if(r!==void 0&&b("bs_caml").i64_eq(c.i,b("bs_caml_int64").zero)){var y={thread:c};a!==void 0&&(y.showQuickActions=a);return h.jsxs(h.Fragment,{children:[u,h.jsx(b("MWV2ContextBanner.bs").make,y),h.jsx(b("MWPMessageListColumn.bs").Grow.make,{children:null}),h.jsx(b("MWV2ThreadNullstate.bs").make,{thread:c,nullstate:r,nullstateCtas:s,lsSource:"inboxInThread",initiatingSource:t})]})}if(n)y=h.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{});else{r={thread:c};a!==void 0&&(r.showQuickActions=a);y=h.jsx(b("MWV2ContextBanner.bs").make,r)}return h.jsxs(h.Fragment,{children:[u,h.jsx(b("MWChatUnsendNUX.bs").make,{senderUnsendNUXEnabled:!0}),h.jsxs(b("MWV2MessageScroller.bs").make,{children:[h.jsxs(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:[h.jsx(b("MWPMessageListColumn.bs").VerticalRhythm.make,{height:20}),y,h.jsx(b("MWPMessageListColumn.bs").VerticalRhythm.make,{height:10})]}),h.jsx(b("MWPMessageListColumn.bs").Grow.make,{children:null}),h.jsx(b("MWV2MessageList.bs").make,{messages:o,thread:c,isSecureThread:!1,messageElementRefs:i.messageElementRefs.current,scrollerRefs:e}),p&&v?h.jsx(b("MWPMessageListColumn.bs").Shrinkwrap.make,{children:h.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{})}):null,h.jsx(b("MWV2QuickReplies.bs").make,{threadKey:c.a,message:o[o.length-1|0],scrollerRefs:e}),d?h.jsx(b("MWV2PersistentIcebreakers.bs").make,{thread:c,nullstateCtas:s,lsSource:"inboxInThread",initiatingSource:t}):null],thread:c,fetchMore:m[1],markThreadAsRead:q,lastMessageToCalculateIfThreadIsRead:o.length!==0?b("bs_caml_array").get(o,o.length-1|0):void 0,scrollerRefs:e,hasMoreBefore:n,hasMoreAfter:p,onScroll:x}),v?h.jsx(b("MWV2JumpToMostRecentMessageButton.bs").make,{scrollerRefs:e,hasMoreAfter:p,visible:!f[0]||p,onPress:function(a){return b("bs_curry")._1(g,function(a){return!0})}}):null]})}c=b("cr:11088");d=a;f.$MWV2ArmadilloDogfoodingUpsell$requireCond=b("cr:11088");f.mwv2ArmadilloDogfoodingUpsell=c;f.useMessages=j;f.make=d}),null);
__d("MWV2ThreadGradientBackground.bs",["MWPThreadTheme.bs","MWV2ColorUtils.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={container:{flexBasis:"rj1gh0hx",flexGrow:"buofh1pr",display:"j83agx80",position:"l9j0dhe7",flexDirection:"cbu4d94t",overflowX:"ni8dbmo4",overflowY:"stjgntxs",maxHeight:"nwf6jgls"}};function a(a){a=a.children;var c=b("MWPThreadTheme.bs").useHook(void 0),d=c.gradientColors;c=i.useMemo(function(){if(d.length>1)return{backgroundImage:b("MWV2ColorUtils.bs").gradient(d,void 0,void 0,void 0)};else return{}},[d]);return i.jsx("div",{style:c,className:(h||(h=b("stylex")))(j.container),children:a})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2OpenAndSecureThreadView.bs",["LSMessagingThreadTypeUtil.bs","MWV2OpenThreadDetail.bs","MWV2ThreadGradientBackground.bs","bs_caml_option","cr:742","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.thread;a=a.showContextBannerQuickActions;if(b("cr:742")==null){var d={thread:c};a!==void 0&&(d.showContextBannerQuickActions=b("bs_caml_option").valFromOption(a));d=h.jsx(b("MWV2OpenThreadDetail.bs").make,d)}else if(b("LSMessagingThreadTypeUtil.bs").isSecure(c.c))d=h.jsx(b("cr:742").make,{thread:c});else{c={thread:c};a!==void 0&&(c.showContextBannerQuickActions=b("bs_caml_option").valFromOption(a));d=h.jsx(b("MWV2OpenThreadDetail.bs").make,c)}return h.jsx(b("MWV2ThreadGradientBackground.bs").make,{children:d})}c=b("cr:742");d=a;f.$MAWSecureThreadDetail$requireCondXplat=b("cr:742");f.mawSecureThreadDetail=c;f.make=d}),null);
__d("BaseMultiStepContainer.re",["BaseMultiStepContainer.react"],(function(a,b,c,d,e,f){a=b("BaseMultiStepContainer.react");f.makeTypeChecked=a;c=a;f.make=c}),null);
__d("LSMessageSearchType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").one;c=[0,2];f.thread=a;f.message=c}),null);/*FB_PKG_DELIM*/
__d("MWChatContact_profile.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"scale"},{defaultValue:!1,kind:"LocalArgument",name:"shouldEnableMWStoriesEntrypoint"}],kind:"Fragment",metadata:null,name:"MWChatContact_profile",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"InlineFragment",selections:[{condition:"shouldEnableMWStoriesEntrypoint",kind:"Condition",passingValue:!0,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"DirectInboxBroadcastBucketConnection",kind:"LinkedField",name:"story_bucket",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThreadBucket",kind:"LinkedField",name:"nodes",plural:!0,selections:[a,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[a,{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_seen_by_viewer",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"story_bucket(first:1)"}]},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_active_time",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:36},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Profile",abstractKey:"__isProfile"}}();e.exports=a}),null);
__d("MWChatContact_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatContact_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null},{alias:null,args:null,concreteType:"PresenceViewerBasedSettings",kind:"LinkedField",name:"presence_view_side_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_active_status_viewable",storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("MWLSPreloadThreadForContact.re",["MWLSPreloadThreadForContact.bs"],(function(a,b,c,d,e,f){a=b("MWLSPreloadThreadForContact.bs").usePreloaderForUser;f.usePreloaderForUser=a}),null);
__d("LSThreadAttributionStore.re",["LSThreadAttributionStore.bs","bs_curry"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("LSThreadAttributionStore.bs").setSource,a,c);return a};f.setSource=a}),null);
__d("MWChatContact.react",["CometRelay","CurrentEnvironment","JSResourceForInteraction","JSScheduler","LSThreadAttributionStore.re","MWChatContact_profile.graphql","MWChatContact_viewer.graphql","MWLSPreloadThreadForContact.re","MWThreadAddOnPrimary.re","StoriesGating","TetraListCell.react","XCometActiveContactsControllerRouteBuilder","XCometMessengerControllerRouteBuilder","XCometStoriesControllerRouteBuilder","gkx","qex","react","recoverableViolation","useCometPreloader"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react"),k=d("react").useCallback,l=c("JSResourceForInteraction")("MWChatTabContainer.bs").__setRef("MWChatContact.react"),m=c("JSResourceForInteraction")("MWV2ChatTab.bs").__setRef("MWChatContact.react");function a(a){var e=a.entryPoint,f=a.openTabForUser,g=a.preventLocalNavigation;g=g===void 0?!0:g;var n=a.profile,o=a.selected;o=o===void 0?!1:o;a=a.viewer;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWChatContact_viewer.graphql"),a);var p=c("qex")._("971346");p=p===!0?(a==null?void 0:(p=a.presence_view_side_settings)==null?void 0:p.is_active_status_viewable)===!0:(a==null?void 0:a.chat_visibility)===!0;a=d("CometRelay").useFragment(i!==void 0?i:i=b("MWChatContact_profile.graphql"),n);n=a.availability;var q=a.id,r=a.last_active_time,s=a.name,t=a.profile_picture,u,v="none";a=(a=a.story_bucket)==null?void 0:a.nodes;a=a?a[0]:null;if(a!=null){var w,x=a.id;w=(w=a.first_story_to_show)==null?void 0:w.id;a=a==null?void 0:(a=a.first_story_to_show)==null?void 0:(a=a.story_card_seen_state)==null?void 0:a.is_seen_by_viewer;a!=null&&(v=a?"seen":"unseen");if(v!=="none"&&x!=null&&w!=null){a=c("XCometStoriesControllerRouteBuilder").buildURL({bucket_id:x,card_id:w,view_single:!0});u={prefetchQueriesOnHover:!0,url:a}}}x=k(function(){c("gkx")("1512630")&&d("JSScheduler").scheduleSpeculativeCallback(function(){c("gkx")("4338")?m.preload():l.preload()})},[]);var y=c("MWLSPreloadThreadForContact.re").usePreloaderForUser();w=k(function(){q!=null&&y(q)},[q,y]);a=c("useCometPreloader")("button",x,w);var z=a[0];x=a[1];var A=a[2],B=a[3];w=k(function(a){A!=null&&A(a),q!=null&&f(q,!1)},[A,q,f]);a=k(function(a){A!=null&&A(a),q!=null&&c("LSThreadAttributionStore.re").setSource(q,e)},[A,q,e]);var C=k(function(a){z(a),B(!0)},[z,B]);t=t==null?void 0:t.uri;if(q==null)return c("recoverableViolation")("Chat contact list cell is missing id","comet_ui");if(s==null)return c("recoverableViolation")("Chat contact list cell is missing name","comet_ui");if(t==null)return c("recoverableViolation")("Chat contact list cell is missing profileUri","comet_ui");n=n==="ACTIVE";p=p?r:void 0;r=d("StoriesGating").shouldEnableMWStoriesEntrypoint()?{addOn:n?{type:"availabilityBadge"}:p!=null?{border:"web-wash",time:p,type:"lastActiveTimeBadge"}:void 0,linkProps:u!=null?u:void 0,shape:"circle",size:36,source:{uri:t},storyStatus:v,type:"profile-photo"}:c("MWThreadAddOnPrimary.re").get({isThreadActive:n,lastActiveTime:p,size:36,threadImages:[t],threadTitle:void 0});v=c("gkx")("1950");n=v?c("XCometActiveContactsControllerRouteBuilder"):c("XCometMessengerControllerRouteBuilder");p=c("CurrentEnvironment").facebookdotcom?n.buildURL({thread_key:q}):(v?"/active":"")+"/t/"+q+"/";return j.jsx(c("TetraListCell.react"),{addOnPrimary:r,disabled:!1,headline:s,level:4,linkProps:{preventLocalNavigation:g,url:p},onHoverIn:C,onHoverOut:x,onPress:g?w:a,selected:o,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("AppRoomsFilled16.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 16 16",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("g",{fillRule:"evenodd",transform:"translate(-448 -544)",children:h.jsx("path",{d:"M457.25 552.5H455v2.25a.75.75 0 0 1-1.5 0v-2.25h-2.25a.75.75 0 0 1 0-1.5h2.25v-2.25a.75.75 0 0 1 1.5 0V551h2.25a.75.75 0 0 1 0 1.5m6.38-4.435a.62.62 0 0 0-.64.047l-2.49 1.634v-1.394a1.854 1.854 0 0 0-1.852-1.852l-8.796.002a1.854 1.854 0 0 0-1.851 1.852v6.793c0 1.021.83 1.852 1.852 1.852l1.147-.002h7.648a1.854 1.854 0 0 0 1.852-1.851v-1.392l2.457 1.61a.641.641 0 0 0 .673.071.663.663 0 0 0 .37-.601v-6.167c0-.26-.142-.49-.37-.602"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("AppRoomsFilled16IconSvg.react",["AppRoomsFilled16.svg.react","SVGIcon"],(function(a,b,c,d,e,f,g){"use strict";a=d("SVGIcon").svgIcon(c("AppRoomsFilled16.svg.react"));g["default"]=a}),98);
__d("XCometActiveContactsControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/messages/active/t/{thread_key}/",Object.freeze({}),["/messages/active/"],void 0);b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("MessengerNotificationsWriter",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h="mw_notifications_db",i="users_mute";function a(a,b){var d,e=self.indexedDB.open(h);e.onupgradeneeded=function(){var b=e.result,c=b.createObjectStore(i,{keyPath:"userId"});c.transaction.oncomplete=function(c){c=b.transaction(i,"readwrite").objectStore(i);c=c.add({isMuted:0,userId:a});c.onsuccess=function(){}}};e.onsuccess=function(){d=e.result;var f=d.transaction([i],"readwrite").objectStore(i),g=f.get(a);g.onerror=function(a){c("FBLogger")("messenger_writer").catching(a).mustfix("Failed to get value in db")};g.onsuccess=function(a){a=a.target.result;a.isMuted=b;a=f.put(a);a.onerror=function(a){c("FBLogger")("messenger_writer").catching(a).mustfix("Failed to write new mute value to db")};a.onsuccess=function(a){}}};e.onerror=function(a){c("FBLogger")("messenger_writer").catching(a).mustfix("Failed to create db")}}g.updateMute=a}),98);
__d("MessengerNotificationsWriter.bs",["MessengerNotificationsWriter"],(function(a,b,c,d,e,f){"use strict";function a(a,c){b("MessengerNotificationsWriter").updateMute(a,c)}f.updateMute=a}),null);/*FB_PKG_DELIM*/
__d("MWCommonSetup.bs",["Promise","bs_caml_option","bs_curry","cr:2073","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=b("cr:2073")==null?void 0:b("bs_caml_option").some(b("cr:2073")),h={contents:!1};function a(a){if(h.contents!==!1)return;h.contents=!0;a=b("cr:2073")==null?b("Promise").resolve(!0):b("bs_curry")._1(g.acquireLocks,void 0);b("promiseDone")(a,void 0,void 0)}f.$MWSetupLock$requireCond=b("cr:2073");f.isSetupExecuted=h;f.make=a}),null);
__d("MWCommonSetup.re",["MWCommonSetup.bs"],(function(a,b,c,d,e,f){a=b("MWCommonSetup.bs").make;f.make=a}),null);
__d("MWV2IsTabFocusedContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext(!1);function a(a){var b=a.children;a=a.isFocused;return h.createElement(i.Provider,{value:a,children:b})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);